class Data {
    let field1;
    let field2;
    let field3;
    let field4;
    let field5;
}

class Wrapper {
    let test;
}

class Test {
    let value;

    fn test() -> this.value;
    fn example() -> this.test() + this.value;
    fn foo() -> this.example() + this.test() + this.value;

    static fn staticTest() -> 25;
    static fn staticExample() -> Test.staticTest() + 25;
    static fn staticFoo() -> Test.staticExample() + Test.staticTest() + 25;

    fn set() {
        this.value.set("name", "Bob");
    }
}

fn composition(t) {
    let wrapper = Wrapper{test: Test{value: 10}};

    t.assert(10, wrapper.test.value);
}

fn instanceMethodCall(t) {
    let test = Test{value: 25};

    t.assert(100, test.foo());
}

fn staticMethodCall(t) {
    t.assert(100, Test.staticFoo());
}

fn wrapReferenceType(t) {
    let test = Test{value: {}};

    t.assertNil(test.value.get("name"));

    test.set();

    t.assert("Bob", test.value.get("name"));
}

fn classFields(t) {
    let data = Data{
        field1: "field1",
        field2: "field2",
        field3: "field3",
        field4: "field4",
        field5: "field5"
    };
    let data2 = Data{
        field4: "field4",
        field2: "field2",
        field3: "field3",
        field1: "field1",
        field5: "field5"
    };

    t.assert("field1", data.field1)
        .assert("field2", data.field2)
        .assert("field3", data.field3)
        .assert("field4", data.field4)
        .assert("field5", data.field5);

    t.assert("field1", data2.field1)
        .assert("field2", data2.field2)
        .assert("field3", data2.field3)
        .assert("field4", data2.field4)
        .assert("field5", data2.field5);
}

fn useBeforeDeclared(t) {
    let test = Late{value: 10};

    t.assert(10, test.value);
}

class Late { let value; }

pub fn classesTests() {
    return [
        composition,
        instanceMethodCall,
        staticMethodCall,
        wrapReferenceType,
        useBeforeDeclared,
        classFields
    ];
}